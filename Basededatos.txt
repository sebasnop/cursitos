
    CREATE TABLE administrador
        (nombre_usuario VARCHAR(40) PRIMARY KEY,
        clave VARCHAR(40) NOT NULL,
        nombre_completo VARCHAR(50) NOT NULL,
        correo VARCHAR(320) NOT NULL UNIQUE,
        hoja_de_vida VARCHAR(500) NOT NULL UNIQUE,
        capacidad INT(6) NOT NULL CHECK (capacidad>=0)
        )ENGINE = InnoDB ROW_FORMAT=DYNAMIC;

    CREATE TABLE profesor
        (nombre_usuario VARCHAR(40) PRIMARY KEY,
        clave VARCHAR(40) NOT NULL,
        nombre_completo VARCHAR(50) NOT NULL,
        correo VARCHAR(320) NOT NULL UNIQUE,
        hoja_de_vida VARCHAR(500) NOT NULL UNIQUE,
        admin_supervisor VARCHAR(40),
        UNIQUE(admin_supervisor),
        FOREIGN KEY fk_admin(admin_supervisor) REFERENCES administrador(nombre_usuario)  ON DELETE CASCADE
        )ENGINE = InnoDB ROW_FORMAT=DYNAMIC ROW_FORMAT=DYNAMIC;


    CREATE TABLE curso
        (codigo INT(6) PRIMARY KEY,
        nombre VARCHAR(200) NOT NULL UNIQUE,
        categoria VARCHAR(50) NOT NULL,
        descripcion VARCHAR(4000) NOT NULL,
        cantidad_estudiantes INT(4) NOT NULL CHECK (cantidad_estudiantes>=0),
        fecha_publicacion DATE NOT NULL CHECK (fecha_publicacion>= DATE('2022-01-01')),
        tipo VARCHAR(11) NOT NULL CHECK (tipo IN ('ASINCRONICO', 'SINCRONICO')),
        profesor_ensenia VARCHAR(40),
        admin_supervisa VARCHAR(40),
        FOREIGN KEY fk_profesor(profesor_ensenia) REFERENCES profesor(nombre_usuario)  ON DELETE CASCADE,
        FOREIGN KEY fk_admin(admin_supervisa) REFERENCES administrador(nombre_usuario)  ON DELETE CASCADE,

        cupos_disponibles INT(4) CHECK (cupos_disponibles>=0),
        fecha_fin DATE,
        CHECK (fecha_fin>=fecha_publicacion),

        duracion_estimada INT(2) CHECK (duracion_estimada>=0),

        CHECK ((tipo='SINCRONICO' AND cupos_disponibles IS NOT NULL AND fecha_fin IS NOT NULL AND duracion_estimada IS NULL)
        OR (tipo='ASINCRONICO' AND  duracion_estimada IS NOT NULL AND cupos_disponibles IS NULL AND fecha_fin IS NULL))
        )ENGINE = InnoDB ROW_FORMAT=DYNAMIC;

    INSERT INTO administrador VALUES ('admin1','claveadmin1','admin1 perez','admin1@cursitos.com','www.hojadevida.com/admin1', 1234);
    INSERT INTO profesor VALUES ('profe1','claveprofe1','profe perez','profe1@cursitos.com','www.hojadevida.com/profe1','admin1');
    INSERT INTO curso VALUES (000001,'php','web','muy bueno',10,DATE('2022-02-02'),'SINCRONICO','profe1','admin1',2,DATE('2023-01-01'), NULL)